import{_ as e,c as i,o as t,a2 as a}from"./chunks/framework.CfIjcEkP.js";const c=JSON.parse('{"title":"Installation","description":"","frontmatter":{},"headers":[],"relativePath":"documentation/getting-started/installation.md","filePath":"documentation/getting-started/installation.md","lastUpdated":1758633015000}'),n={name:"documentation/getting-started/installation.md"};function l(o,s,r,h,p,d){return t(),i("div",null,[...s[0]||(s[0]=[a(`<h1 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h1><p>We will walk you through the steps to set up a functioning local setup using KIND (Kubernetes IN Docker). OpenMFP leverages <a href="https://fluxcd.io/" target="_blank" rel="noreferrer">Flux</a>, a tool designed to keep Kubernetes clusters synchronized with configuration sources, alongside <a href="https://kustomize.io/" target="_blank" rel="noreferrer">Kustomize</a>, a standalone tool for customizing Kubernetes resources. Together, these tools enable efficient and automated cluster management.</p><p>We will configure Flux to install, test and upgrade a demo app using <code>OCIRepository</code> and <code>HelmRelease</code> custom resources. Flux will monitor the Helm repository, and it will automatically upgrade the Helm releases to their latest chart version based on semver ranges.</p><p>By the end, you&#39;ll have a working setup ready to explore the full potential of OpenMFP while managing your cluster efficiently.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ol><li><p><strong>Container Runtime</strong><br> Install either <a href="https://www.docker.com" target="_blank" rel="noreferrer">Docker</a> or <a href="https://podman.io" target="_blank" rel="noreferrer">Podman</a> to run the kind cluster:</p><ul><li><strong>Docker</strong>: Version <code>27.0.0</code> or higher. Installation Guide <a href="https://docs.docker.com/get-docker/" target="_blank" rel="noreferrer">Get Docker</a></li><li><strong>Podman</strong>: Version <code>5.1.0</code> or higher. Installation Guide <a href="https://podman.io/get-started" target="_blank" rel="noreferrer">Install Podman</a><br> Ensure Docker or Podman is configured to use at least 12GB of memory.</li></ul><p>For Podman you will need to run:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> machine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> machine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rootful</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --memory=12240</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> machine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><p>For Docker you will need to go to Docker Desktop -&gt; Settings -&gt; Resources -&gt; Advanced and set the memory to 12GB.</p></li><li><p><strong>Kind (Kubernetes IN Docker)</strong><br> To set up a local Kubernetes cluster, use <a href="https://kind.sigs.k8s.io/" target="_blank" rel="noreferrer">Kind</a>. Follow the <a href="https://kind.sigs.k8s.io/docs/user/quick-start/" target="_blank" rel="noreferrer">Kind Quick Start</a> guide for more details. For macOS Installation via <a href="https://brew.sh/" target="_blank" rel="noreferrer">Homebrew</a> run:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kind</span></span></code></pre></div></li><li><p><strong>Helm</strong><br><a href="https://helm.sh/" target="_blank" rel="noreferrer">Helm</a> is required to bootstrap Flux. You can find detailed installation instructions <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noreferrer">here</a>. For macOS Installation via Homebrew run:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> helm</span></span></code></pre></div></li><li><p><strong>Kubectl</strong><br><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noreferrer">Kubectl</a> is the Kubernetes command-line tool. You can install it using the following command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubectl</span></span></code></pre></div><p>For more installation options, refer to the <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noreferrer">Kubectl Installation Guide</a>.</p></li><li><p><strong>GitHub setup</strong><br> Set <code>GH_USER</code> or install the <a href="https://cli.github.com/" target="_blank" rel="noreferrer">GitHub CLI</a> to setup your environment for Flux:</p><ul><li>Specify your GitHub username by setting the <code>GH_USER</code> environment variable:<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GH_USER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your-github-username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div></li><li>Alternatively, install the GitHub CLI For macOS Installation via Homebrew run:<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gh</span></span></code></pre></div></li></ul><p>Set a GitHub token to enable pulling OpenMFP Docker images, this token should have the <code>read:packages</code> scope.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GH_TOKEN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your-github-token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div></li><li><p><strong>Keycloak (Authentication Setup - Optional)</strong><br> You only need this step if you plan to use your own <a href="https://www.keycloak.org/" target="_blank" rel="noreferrer">Keycloak</a> instance. If not, a default Keycloak will be installed automatically during the setup process. To use your own Keycloak, set up the client secret as an environment variable:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> KEYCLOAK_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keycloak-client-secret</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div></li><li><p><strong>Free Port 8000</strong><br> The local OpenMFP portal will use port <code>8000</code>. Ensure this port is not in use by another application before proceeding.</p><ul><li>On Linux/macOS, you can check and free the port with the following commands:</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :8000</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">kill</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -9</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Replace &lt;PID&gt; with the process ID using the port</span></span></code></pre></div></li></ol><h2 id="bootstrap-local-environment" tabindex="-1">Bootstrap local environment <a class="header-anchor" href="#bootstrap-local-environment" aria-label="Permalink to &quot;Bootstrap local environment&quot;">​</a></h2><p>Once the prerequisites are in place, follow these steps to set up the local environment:</p><ol><li><p><strong>Clone the OpenMFP Repository</strong><br> Start by cloning the OpenMFP Helm charts repository:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/openmfp/helm-charts</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> helm-charts</span></span></code></pre></div></li><li><p><strong>Run the Bootstrap Script</strong><br> The repository includes a script <code>local-setup/scripts/start.sh</code>, it contains all steps needed to bootstrap the local environment. The script will take some time and it automate the following steps:</p><ul><li>Create kind cluster called <code>openmfp</code></li><li>Install flux</li><li>Prepare secrets</li><li>Apply flux deployment configuration</li></ul><p>To start the bootstrapping and local installation, run the following command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./local-setup/scripts/start.sh</span></span></code></pre></div></li><li><p><strong>Access the Local Environment</strong><br> Once the bootstrap process finishes, you can access the local Demo OpenMFP Portal at: <a href="http://localhost:8000" target="_blank" rel="noreferrer">http://localhost:8000</a></p></li></ol><h2 id="remove-the-cluster" tabindex="-1">Remove the Cluster <a class="header-anchor" href="#remove-the-cluster" aria-label="Permalink to &quot;Remove the Cluster&quot;">​</a></h2><p>If you want to delete the local environment and remove the KIND cluster, run the following command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cluster</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openmfp</span></span></code></pre></div><p>If the deletion is stuck validate that the container runtime (Docker or Podman) is started and running.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><p>If the bootstrap script does not successfully finish, connect to the <code>kind-openmfp</code> cluster, take the following steps to investigate:</p><ol><li>Verify the cluster is running and accessible:</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cluster-info</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --context</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kind-openmfp</span></span></code></pre></div><ol start="2"><li>Identify any pods that are not in the <code>Running</code> status:</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pods</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all-namespaces</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Running</span></span></code></pre></div><ol start="3"><li>For pods that are stuck or failing, inspect the events for more details:</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> describe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pod-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">namespac</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Review the <code>Events</code> section in the output to pinpoint and address the underlying issue.</p><ol start="4"><li>If the issue is related to memory constraints, increase the memory allocation for Docker or Podman as described in the Prerequisites section.</li></ol>`,23)])])}const g=e(n,[["render",l]]);export{c as __pageData,g as default};
